{{ define "content" }}
<div class="flex flex-col
            blog-content-width
            pt-20 md:pt-30 pb-12">


    {{ $pages := partial "get-posts.html" . }}
    {{ $groupedPages := slice }}
    {{ $isListType := in (slice "home" "section" "taxonomy" "term") .Kind }}
    {{ $shouldPaginate := and $isListType (.Site.Params.enablePagination | default false) }}
    {{ $isTaxonomy := false }}

    {{ if $shouldPaginate }}
    {{ $paginator := .Paginate $pages }}
    {{ $groupedPages = $paginator.Pages.GroupByDate "2006" }}
    {{ else if .Data.Terms }}
    {{ $groupedPages = .Data.Terms.Alphabetical }}
    {{ $isTaxonomy = true }}
    {{ else if eq .Kind "page" }}
    <!-- For single pages, just render the content without pagination -->
    <!-- The single.html template should handle these pages normally -->
    {{ else }}
    {{ $groupedPages = $pages.GroupByDate "2006" }}
    {{ end }}

    <!-- custom content included in header page -->
    {{ if .Content }}
        {{ if not .IsHome }}
        <h1 class="
            text-3xl font-title font-semibold mb-8 block">
            {{ .Title }}
        </h1>
        {{ end }}

        <article class="post-content hero my-4 hero-with-metaball">
            <!-- Metaball SVG background -->
            <div class="metaball-container">
                <svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">
                    <defs>
                        <!-- Aurora Gradient Definition -->
                        <linearGradient id="auroraGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                          <stop offset="0%" style="stop-color:#001a33;stop-opacity:1">
                            <animate attributeName="stop-color"
                                     values="#001a33;#1a0033;#003333;#001a33"
                                     dur="20s"
                                     repeatCount="indefinite"/>
                          </stop>
                          <stop offset="25%" style="stop-color:#0d4d4d;stop-opacity:1">
                            <animate attributeName="stop-color"
                                     values="#0d4d4d;#4d0d4d;#0d4d66;#0d4d4d"
                                     dur="18s"
                                     repeatCount="indefinite"/>
                          </stop>
                          <stop offset="50%" style="stop-color:#1a8080;stop-opacity:1">
                            <animate attributeName="stop-color"
                                     values="#1a8080;#801a80;#1a8099;#1a8080"
                                     dur="22s"
                                     repeatCount="indefinite"/>
                          </stop>
                          <stop offset="75%" style="stop-color:#26b3b3;stop-opacity:1">
                            <animate attributeName="stop-color"
                                     values="#26b3b3;#b326b3;#2680b3;#26b3b3"
                                     dur="16s"
                                     repeatCount="indefinite"/>
                          </stop>
                          <stop offset="100%" style="stop-color:#33e6e6;stop-opacity:1">
                            <animate attributeName="stop-color"
                                     values="#33e6e6;#e633e6;#3399e6;#33e6e6"
                                     dur="24s"
                                     repeatCount="indefinite"/>
                          </stop>

                          <!-- Animate gradient position/angle -->
                          <animateTransform attributeName="gradientTransform"
                                            type="rotate"
                                            from="0 0.5 0.5"
                                            to="360 0.5 0.5"
                                            dur="30s"
                                            repeatCount="indefinite"/>
                        </linearGradient>

                        <!-- Radial gradient overlay for glow effect -->
                        <radialGradient id="auroraGlow" cx="50%" cy="50%" r="50%">
                          <stop offset="0%" style="stop-color:#ffffff;stop-opacity:0.3">
                            <animate attributeName="stop-opacity"
                                     values="0.3;0.5;0.2;0.3"
                                     dur="15s"
                                     repeatCount="indefinite"/>
                          </stop>
                          <stop offset="50%" style="stop-color:#99ffff;stop-opacity:0.2">
                            <animate attributeName="stop-opacity"
                                     values="0.2;0.4;0.1;0.2"
                                     dur="12s"
                                     repeatCount="indefinite"/>
                          </stop>
                          <stop offset="100%" style="stop-color:#000000;stop-opacity:0"/>

                          <animateTransform attributeName="gradientTransform"
                                            type="translate"
                                            values="0 0; 0.2 0.1; -0.1 0.2; 0 0"
                                            dur="25s"
                                            repeatCount="indefinite"/>
                        </radialGradient>
                      </defs>
                </svg>
            </div>

            {{ .Content }}
        </article>
    {{ end }}

</div>

<!-- Skills tag cloud -->
{{ if .IsHome }}
<div class="flex flex-col
            blog-content-width
            mb-8">
    <h2 class="font-semibold md:font-bold leading-tight text-lg lg:text-3xl mb-4">{{ i18n "skills" }}</h2>
    {{ partial "skill-tags.html" . }}
</div>
{{ end }}

<!-- Scrolling logos banner -->
{{ if .IsHome }}
<div class="flex flex-col
            blog-content-width
            mb-2">
    <h2 class="font-semibold md:font-bold leading-tight text-lg lg:text-3xl">{{ i18n "worked_with" }}</h2>
</div>
{{ partial "logo-scroll.html" . }}
{{ end }}

<!-- Projects section -->
{{ if .IsHome }}
{{- $projects := where .Site.RegularPages "Type" "projects" -}}
{{- if $projects }}
<div class="flex flex-col blog-content-width my-12">
  <div class="flex items-center justify-between mb-6">
    <h2 class="font-semibold md:font-bold leading-tight text-lg lg:text-3xl">{{ i18n "projects" }}</h2>
    <a href="/projects/" class="text-sm font-medium text-slate-600 hover:text-yellow-500 dark:text-slate-400 dark:hover:text-orange-500 transition-colors">
      {{ i18n "view_all" }} â†’
    </a>
  </div>
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    {{- range first 6 (where $projects ".Params.featured" "!=" false).ByDate.Reverse }}
      {{ partial "project-card.html" . }}
    {{- end }}
  </div>
</div>
{{- end }}
{{ end }}

<div class="flex flex-col
            blog-content-width
            pb-12">

    <!-- Show tag cloud for main tags taxonomy page -->
    {{ if and (eq .Kind "taxonomy") (eq .Type "tags") }}
        <div class = "mb-10">
            {{ partial "tag-cloud.html" (dict "Site" .Site "count" -1 "sort" "alphabetical") }}
        </div>
    {{ end }}

    {{ if and (ne .Type "tags") (ne .Kind "page") }}
    {{ range $groupedPages }}


        {{ if $isTaxonomy }} <!-- inside a taxonomy page | no pagination-->
        {{ $key := .Name }}
        {{ $groupPages := .Pages }}
            <h2 class="
                    post-list-key term
                    mt-10 font-bold" id="{{ $key }}">
                <a class="pill-slate" href="{{ $key }}/">#{{ $key }}</a>
            </h2>
            <div class="post-list-content">
                {{ range $groupPages }}
                {{ .Render "li" }}
                {{ end }}
            </div>


        {{ else if $shouldPaginate }} <!-- inside a regular list page | pagination -->
            {{ if ne .Key "0001" }} <!-- if key is 0001 skip h2 -->
            <h2 class="
                    post-list-key year
                    mt-4
                    text-ht-light font-bold
                    " id="{{ .Key }}">
                <time>{{ .Key }}</time>
            </h2>
            {{ end }}

            <div class="post-list-content">
                {{ range .Pages }}
                {{ .Render "li" }}
                {{ end }}
            </div>

        {{ else }} <!-- inside a regular list page | no pagination -->
        {{ $key := .Key }}
        {{ $groupPages := .Pages }}

            <h2 class="
                post-list-key group
                not-first:mt-10
                font-bold text-ht-lighter
                " id="{{ $key }}">
                #{{ $key }}
            </h2>
            <div class="post-list-content">
                {{ range $groupPages }}
                {{ .Render "li" }}
                {{ end }}
            </div>
        {{ end }}


    {{ end }} <!-- range end $groupedPages -->
    {{ end }} <!-- if ne .Kind "page" -->


    {{ if and (not $isTaxonomy) $shouldPaginate }}
    <div class="pagination">{{ template "_internal/pagination.html" . }}</div>
    {{ end }}


    <!-- show RHS navbar content -->
    {{- partial "nav.html" . -}}

</div>
{{ end }}
